import{a as u,f as b,c as Q}from"../chunks/BpHirtZf.js";import{i as T}from"../chunks/BivNrnZK.js";import{f as W,g as s,i as r,n as S,j as i,k as o,t as E,l as c,o as B,q as h,u as q,v as U}from"../chunks/DhQxBYmS.js";import{i as z,s as X,a as Y}from"../chunks/BQpfd7Kh.js";import{g as M}from"../chunks/0aLkdjJN.js";import{p as F,u as G}from"../chunks/D02YVmrd.js";import{e as Z,s as $}from"../chunks/BLSTmA5_.js";import{I as w,r as R,b as V}from"../chunks/C6WBKgN3.js";var ee=b('<div class="p-3 bg-red-50 text-red-600 text-xs font-bold rounded-lg flex items-center gap-2"><!> </div>'),ae=b("<!> <span>Signing In...</span>",1),te=b("<!> <span>Sign In</span>",1),se=b('<div class="min-h-screen flex items-center justify-center bg-slate-100"><div class="bg-white p-10 rounded-2xl shadow-xl w-full max-w-md border border-slate-200"><div class="flex flex-col items-center mb-8 gap-4"><div class="bg-indigo-600 p-3 rounded-xl text-white shadow-lg"><!></div> <h1 class="text-2xl font-black text-slate-800 uppercase tracking-tight">DocAssemble</h1></div> <form class="space-y-6"><div><label class="block text-xs font-black uppercase text-slate-400 mb-2 tracking-widest">Email</label> <input type="email" required="" class="w-full px-4 py-3 rounded-lg border border-slate-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all font-medium" placeholder="attorney@firm.com"/></div> <div><label class="block text-xs font-black uppercase text-slate-400 mb-2 tracking-widest">Password</label> <input type="password" required="" class="w-full px-4 py-3 rounded-lg border border-slate-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all font-medium" placeholder="••••••••"/></div> <!> <button type="submit" class="w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-black uppercase tracking-widest transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"><!></button></form></div></div>');function re(y,f){W(f,!0);let v=h(""),m=h(""),n=h(!1),l=h(null);async function x(e){e.preventDefault(),c(n,!0),c(l,null);try{const a=await F.collection("users").authWithPassword(o(v),o(m));G.set(a.record),f.onLogin&&f.onLogin(a.record)}catch(a){console.error("Login failed",a),c(l,"Invalid email or password.")}finally{c(n,!1)}}var p=se(),_=s(p),g=s(_),t=s(g),k=s(t);w(k,{name:"Layout",size:32}),r(t),S(2),r(g);var L=i(g,2),I=s(L),A=i(s(I),2);R(A),r(I);var j=i(I,2),P=i(s(j),2);R(P),r(j);var C=i(j,2);{var H=e=>{var a=ee(),d=s(a);w(d,{name:"AlertCircle",size:16});var O=i(d);r(a),E(()=>$(O,` ${o(l)??""}`)),u(e,a)};z(C,e=>{o(l)&&e(H)})}var D=i(C,2),J=s(D);{var K=e=>{var a=ae(),d=q(a);w(d,{name:"Loader2",class:"animate-spin"}),S(2),u(e,a)},N=e=>{var a=te(),d=q(a);w(d,{name:"LogIn"}),S(2),u(e,a)};z(J,e=>{o(n)?e(K):e(N,!1)})}r(D),r(L),r(_),r(p),E(()=>D.disabled=o(n)),Z("submit",L,x),V(A,()=>o(v),e=>c(v,e)),V(P,()=>o(m),e=>c(m,e)),u(y,p),B()}var oe=b('<div class="h-screen flex items-center justify-center bg-slate-50"><p class="text-slate-400 font-bold animate-pulse uppercase tracking-widest text-xs">Redirecting to Dashboard...</p></div>');function me(y,f){W(f,!1);const v=()=>Y(G,"$user",m),[m,n]=X();U(()=>{F.authStore.isValid&&M("/matters")});async function l(){M("/matters")}T();var x=Q(),p=q(x);{var _=t=>{re(t,{onLogin:l})},g=t=>{var k=oe();u(t,k)};z(p,t=>{v()?t(g,!1):t(_)})}u(y,x),B(),n()}export{me as component};
