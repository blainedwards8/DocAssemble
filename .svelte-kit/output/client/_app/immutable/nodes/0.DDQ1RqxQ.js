import{c as p,a as m}from"../chunks/BpHirtZf.js";import{J as f,K as g,f as d,v as h,u as y,o as b}from"../chunks/DhQxBYmS.js";import{B as S}from"../chunks/BFc7_J5-.js";import{p as s,u,s as v,b as A,m as E}from"../chunks/D02YVmrd.js";function F(i,r,...o){var n=new S(i);f(()=>{const a=r()??null;n.ensure(a,a&&(e=>a(e,...o)))},g)}function T(i,r){d(r,!0),h(()=>{s.authStore.isValid&&(u.set(s.authStore.record),o());const e=s.authStore.onChange((l,c)=>{u.set(c),c&&o()});return()=>{e()}});async function o(){try{const l=(await s.collection("templates").getFullList({sort:"title"})).map(t=>({id:t.id,category:t.category,title:t.title,content:t.content,state:t.state||t.description,tag:Array.isArray(t.tags)?t.tags[0]||"":t.tags||""}));v.set(l.filter(t=>t.category==="Structure")),A.set(l.filter(t=>t.category!=="Structure"));const c=await s.collection("matters").getFullList({sort:"-created"});E.set(c)}catch(e){console.error("Error loading PB data",e)}}var n=p(),a=y(n);F(a,()=>r.children),m(i,n),b()}export{T as component};
