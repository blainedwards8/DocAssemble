import{a as p,c as Je,f as g}from"../chunks/BpHirtZf.js";import{f as Re,q as V,w as Xe,x as Ce,k as e,l as d,u as Q,g as r,i as a,j as n,A as ze,n as W,t as L,o as Ke,z as te,v as ht}from"../chunks/DhQxBYmS.js";import{p as _t,i as O,s as wt,a as Ne}from"../chunks/BQpfd7Kh.js";import{T as yt,p as kt}from"../chunks/N63xrfm6.js";import{d as St,s as N,a as f,e as Ct}from"../chunks/BLSTmA5_.js";import{I as h,r as je,e as ae,s as K,b as Y,i as Pe,a as zt}from"../chunks/C6WBKgN3.js";import{e as Nt}from"../chunks/DvC7P_P4.js";import{p as G,s as jt,v as Pt,b as He}from"../chunks/D02YVmrd.js";import{g as Ge}from"../chunks/0aLkdjJN.js";var Ut=g("<!> <span>Saving...</span>",1),Tt=g("<!> <span>Saved to Cloud</span>",1),Dt=g('<button><div class="flex flex-col"><span class="font-black uppercase tracking-tight"> </span> <span> </span></div> <!></button>'),Lt=g('<div class="text-[10px] italic text-slate-300">No sections found</div>'),Ot=g('<button><div class="flex items-center gap-1"><!> </div> <!></button>'),Vt=g('<div class="text-[10px] italic text-slate-300 w-full">No variables found</div>'),Et=g('<p class="text-[10px] font-bold text-indigo-500 uppercase"> </p>'),At=g('<button class="absolute right-2.5 top-2.5 text-slate-400 hover:text-slate-600 border-none bg-transparent cursor-pointer"><!></button>'),It=g('<span class="inline-block mt-1 px-1.5 py-0.5 bg-indigo-50 text-indigo-500 text-[8px] font-black uppercase tracking-widest rounded border border-indigo-100"> </span>'),Mt=g('<div role="button" tabindex="0" class="group p-4 rounded-xl border border-slate-100 bg-slate-50/50 hover:bg-white hover:border-indigo-200 hover:shadow-md transition-all cursor-pointer relative text-left w-full border-none"><div class="flex justify-between items-start mb-2"><div class="flex-1"><h4 class="text-[11px] font-black text-slate-800 line-clamp-2 leading-tight group-hover:text-indigo-600 transition-colors uppercase tracking-tight"> </h4> <!></div> <div class="flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity shrink-0"><button class="p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-md transition-all border-none cursor-pointer bg-transparent" title="Edit"><!></button> <button class="p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-md transition-all border-none cursor-pointer bg-transparent" title="Delete"><!></button></div></div> <p class="text-[10px] text-slate-400 font-medium line-clamp-2 italic tracking-tighter leading-tight"> </p></div>'),Bt=g('<div class="text-center py-10 bg-slate-50/50 rounded-xl border border-dashed border-slate-200"><p class="text-[10px] font-black uppercase tracking-widest text-slate-300"> </p></div>'),Ft=g('<div class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center z-[100] p-6 animate-in fade-in duration-200"><form class="bg-white rounded-3xl shadow-2xl w-full max-w-xl overflow-hidden animate-in zoom-in-95 duration-200"><header class="px-8 py-6 border-b border-slate-100 flex justify-between items-center bg-indigo-50/30"><div><h2 class="text-lg font-black text-slate-800 tracking-tight uppercase"> </h2> <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1"> </p></div> <button type="button" class="p-2 hover:bg-slate-200/50 rounded-xl transition-all border-none bg-transparent cursor-pointer"><!></button></header> <div class="p-8 space-y-6"><div class="space-y-2"><label class="text-[10px] font-black uppercase tracking-widest text-slate-400">Title</label> <input required="" type="text" class="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-slate-700 focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all"/></div> <div class="space-y-2"><label class="text-[10px] font-black uppercase tracking-widest text-slate-400">Content</label> <textarea required="" rows="8" class="w-full px-4 py-4 bg-slate-50 border border-slate-200 rounded-xl font-mono text-xs text-slate-700 focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all resize-none"></textarea></div></div> <footer class="p-6 bg-slate-50 border-t border-slate-100 flex justify-end gap-3"><button type="button" class="px-6 py-2.5 text-slate-400 font-bold hover:text-slate-600 transition-colors border-none bg-transparent cursor-pointer uppercase text-xs">Cancel</button> <button type="submit" class="px-8 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl text-xs font-black uppercase tracking-widest shadow-lg shadow-indigo-100 transition-all border-none cursor-pointer"> </button></footer></form></div>'),qt=g("<button> </button>"),Jt=g('<textarea rows="4" class="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-xs text-slate-700 focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all" placeholder="Option 1\\nOption 2"></textarea>'),Xt=g('<div class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center z-[110] p-6 animate-in fade-in duration-200"><div class="bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200"><header class="px-8 py-6 border-b border-slate-100 flex justify-between items-center bg-indigo-50/30"><div><h2 class="text-lg font-black text-slate-800 tracking-tight uppercase">Variable Settings</h2> <p class="text-[10px] font-bold text-indigo-500 uppercase tracking-widest mt-1"> </p></div> <button class="p-2 hover:bg-slate-200/50 rounded-xl transition-all border-none bg-transparent cursor-pointer"><!></button></header> <div class="p-8 space-y-6"><div class="grid grid-cols-3 gap-2"></div> <!></div> <footer class="p-6 bg-slate-50 border-t border-slate-100 flex justify-end"><button class="px-8 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl text-xs font-black uppercase tracking-widest shadow-lg shadow-indigo-100 transition-all border-none cursor-pointer">Done</button></footer></div></div>'),Ht=g(`<div class="flex-1 flex flex-col bg-slate-50 overflow-hidden h-full"><header class="h-16 bg-white border-b border-slate-200 flex items-center justify-between px-6 shrink-0 z-10 shadow-sm"><div class="flex items-center gap-4 flex-1"><button class="p-2 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-slate-600 transition-all border-none bg-transparent cursor-pointer"><!></button> <input type="text" class="bg-transparent border-none text-lg font-black text-slate-800 focus:ring-0 w-full max-w-md placeholder:text-slate-200 outline-none" placeholder="Untitled Structure"/></div> <div class="flex items-center gap-3"><div class="flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-slate-300 mr-4"><!></div> <button class="p-2.5 bg-slate-50 hover:bg-indigo-50 text-slate-400 hover:text-indigo-600 rounded-xl transition-all border border-slate-200 hover:border-indigo-100 shadow-sm cursor-pointer" title="Syntax Cheat Sheet"><!></button> <button class="px-5 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl text-xs font-black uppercase tracking-widest shadow-lg shadow-indigo-100 transition-all border-none cursor-pointer">Save Now</button></div></header> <div class="flex-1 flex overflow-hidden"><div class="flex-1 flex flex-col bg-white border-r border-slate-200 shadow-inner overflow-hidden"><div class="h-full relative font-mono"><textarea class="absolute inset-0 w-full h-full p-8 text-sm text-slate-700 leading-relaxed resize-none focus:outline-none custom-scrollbar selection:bg-indigo-100 selection:text-indigo-700 border-none" placeholder="# Document Title\\n\\nUse {variable_name} for variables.\\nUse [[Section Name|Category]] for document sections/structural elements.\\nUse {#foreach list}...{/foreach} for loops.\\n\\nNormal # Markdown Headers are supported." spellcheck="false"></textarea></div></div> <div><div class="w-80 border-r border-slate-200 p-6 overflow-y-auto custom-scrollbar space-y-8 flex flex-col"><div><div class="flex items-center justify-between mb-4"><div class="flex items-center gap-2"><!> <h3 class="text-xs font-black uppercase tracking-widest text-slate-400">Sections</h3></div> <button>Library</button></div> <div class="space-y-2"><!></div></div> <div><div class="flex items-center gap-2 mb-4"><!> <h3 class="text-xs font-black uppercase tracking-widest text-slate-400">Variables</h3></div> <div class="flex flex-wrap gap-2"><!></div></div> <div class="mt-auto pt-8 border-t border-slate-200"><p class="text-[10px] text-slate-300 font-medium uppercase tracking-[0.1em]">DocAssemble Structure Editor v1.2. Manage provisions by
                        selecting a section.</p></div></div> <div class="w-80 bg-white p-6 overflow-y-auto custom-scrollbar flex flex-col border-r border-slate-200"><div class="flex items-center justify-between mb-2"><div><h3 class="text-xs font-black uppercase tracking-widest text-slate-400 mb-1"> </h3> <!></div> <button class="p-2 bg-indigo-50 text-indigo-600 hover:bg-indigo-600 hover:text-white rounded-lg transition-all border-none cursor-pointer" title="New Provision"><!></button></div> <div class="mb-4 relative"><input type="text" placeholder="Search clauses..." class="w-full pl-8 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-xs focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all"/> <!> <!></div> <div class="space-y-3"></div></div></div></div></div> <!> <!>`,1);function Gt(re,s){Re(s,!0);let j=_t(s,"variableConfigs",19,()=>({})),F=V(Xe(s.initialStructure?.title||"New Structure")),I=V(Xe(s.initialStructure?.content||"")),J=V(!1),ie=V(!1),u=V(null),P=V(!1),x=V(null),M=V(""),_=V(null),X=te(()=>Nt(e(I)));Ce(()=>{s.onContentChange?.(e(I))}),Ce(()=>{s.onTitleChange?.(e(F))});let R;Ce(()=>(clearTimeout(R),R=setTimeout(()=>{(e(I)!==(s.initialStructure?.content||"")||e(F)!==(s.initialStructure?.title||""))&&Z()},2e3),()=>clearTimeout(R)));async function Z(){d(J,!0);try{if(s.activeDocumentId){const i={rawTemplate:e(I),structureId:s.initialStructure?.id,structureTitle:e(F),variables:s.variables||{},slotValues:s.slotValues||{},tierStyles:s.tierStyles||["decimal","lower-alpha","lower-roman"],continuousNumbering:s.continuousNumbering!==void 0?s.continuousNumbering:!0,variableConfigs:j()},o=JSON.stringify(i);await G.collection("documents").update(s.activeDocumentId,{description:o,state:o});return}const t={title:e(F),content:e(I),category:"Structure",tags:[]};if(s.initialStructure?.id){const i={...t,state:JSON.stringify({variableConfigs:j()})},o=await G.collection("templates").update(s.initialStructure.id,i);s.onSave&&s.onSave(o)}else{const i={...t,state:JSON.stringify({variableConfigs:j()})},o=await G.collection("templates").create(i);s.onSave&&s.onSave(o)}}catch(t){console.error("Save failed:",t)}finally{d(J,!1)}}async function oe(t){t.preventDefault();const i=e(x).tag?.trim(),o=e(u)?.category||"Uncategorized",b={title:e(x).title,content:e(x).content,category:o,tags:i?[i]:[]};try{if(e(x).id){const l=await G.collection("templates").update(e(x).id,b);s.onUpdateSnippets(s.snippets.map(c=>c.id===l.id?{...l,tag:l.tags?.[0]||""}:c))}else{const l=await G.collection("templates").create(b);s.onUpdateSnippets([...s.snippets,{...l,tag:l.tags?.[0]||""}])}d(P,!1)}catch(l){console.error("Failed to save provision",l),alert("Failed to save provision. Please check your connection.")}}async function ne(t){if(confirm("Are you sure you want to delete this provision?"))try{await G.collection("templates").delete(t),s.onUpdateSnippets(s.snippets.filter(i=>i.id!==t))}catch(i){console.error("Failed to delete provision",i)}}let se=te(()=>()=>{let t=s.snippets;if(e(u)){const i=e(u).category||"Uncategorized";t=t.filter(o=>(o.category||"Uncategorized")===i)}if(e(M)){const i=e(M).toLowerCase();t=t.filter(o=>o.title&&o.title.toLowerCase().includes(i)||o.content&&o.content.toLowerCase().includes(i)||o.tag&&o.tag.toLowerCase().includes(i))}return t});function m(t){d(u,e(u)?.title===t.title?null:t,!0)}var U=Ht(),B=Q(U),le=r(B),de=r(le),$=r(de),Qe=r($);h(Qe,{name:"ArrowLeft",size:20}),a($);var Ue=n($,2);je(Ue),a(de);var Te=n(de,2),ce=r(Te),We=r(ce);{var Ye=t=>{var i=Ut(),o=Q(i);h(o,{name:"Loader2",size:12,class:"animate-spin text-indigo-500"}),W(2),p(t,i)},Ze=t=>{var i=Tt(),o=Q(i);h(o,{name:"Check",size:12,class:"text-emerald-500"}),W(2),p(t,i)};O(We,t=>{e(J)?t(Ye):t(Ze,!1)})}a(ce);var ee=n(ce,2),$e=r(ee);h($e,{name:"HelpCircle",size:20}),a(ee);var et=n(ee,2);a(Te),a(le);var De=n(le,2),ve=r(De),Le=r(ve),Oe=r(Le);ze(Oe),a(Le),a(ve);var ue=n(ve,2),pe=r(ue),be=r(pe),ge=r(be),fe=r(ge),tt=r(fe);h(tt,{name:"Layers",size:16,class:"text-indigo-500"}),W(2),a(fe);var Ve=n(fe,2);a(ge);var Ee=n(ge,2),at=r(Ee);{var rt=t=>{var i=Je(),o=Q(i);ae(o,17,()=>e(X).sections,Pe,(b,l)=>{var c=Dt(),S=r(c),w=r(S),E=r(w,!0);a(w);var y=n(w,2),C=r(y,!0);a(y),a(S);var D=n(S,2);{let T=te(()=>e(u)?.title===e(l).title?"translate-x-1":"opacity-0 group-hover:opacity-100");h(D,{name:"ChevronRight",size:14,get class(){return`transition-transform ${e(T)??""}`}})}a(c),L(()=>{K(c,1,`w-full text-left text-xs p-3 rounded-xl border transition-all flex justify-between items-center group cursor-pointer
                                        ${e(u)?.title===e(l).title?"bg-indigo-600 border-indigo-700 text-white shadow-md":"bg-white border-slate-200 text-slate-600 hover:border-indigo-300 hover:bg-indigo-50/30"}`),N(E,e(l).title),K(y,1,`text-[9px] uppercase tracking-widest font-black mt-1 ${e(u)?.title===e(l).title?"text-indigo-200":"text-slate-300"}`),N(C,e(l).category||"No Category")}),f("click",c,()=>m(e(l))),p(b,c)}),p(t,i)},it=t=>{var i=Lt();p(t,i)};O(at,t=>{e(X).sections.length>0?t(rt):t(it,!1)})}a(Ee),a(be);var Ae=n(be,2),xe=r(Ae),ot=r(xe);h(ot,{name:"Brackets",size:16,class:"text-emerald-500"}),W(2),a(xe);var Ie=n(xe,2),nt=r(Ie);{var st=t=>{var i=Je(),o=Q(i);ae(o,17,()=>e(X).variables,Pe,(b,l)=>{const c=te(()=>j()[e(l)]||{type:"text"});var S=Ot(),w=r(S),E=r(w);{var y=z=>{h(z,{name:"Calendar",size:10})},C=z=>{h(z,{name:"List",size:10})};O(E,z=>{e(c).type==="date"?z(y):e(c).type==="select"&&z(C,1)})}var D=n(E);a(w);var T=n(w,2);h(T,{name:"Settings",size:10,class:"opacity-0 group-hover:opacity-100 transition-opacity"}),a(S),L(()=>{K(S,1,`text-[10px] font-black px-2 py-1 bg-white border rounded-md shadow-sm transition-all flex items-center gap-1.5 group cursor-pointer
                                        ${e(c).type==="text"?"border-slate-200 text-emerald-600 hover:border-emerald-300":e(c).type==="date"?"border-indigo-200 text-indigo-600 hover:border-indigo-400":"border-amber-200 text-amber-600 hover:border-amber-400"}`),N(D,` ${e(l)??""}`)}),f("click",S,()=>d(_,e(l),!0)),p(b,S)}),p(t,i)},lt=t=>{var i=Vt();p(t,i)};O(nt,t=>{e(X).variables.length>0?t(st):t(lt,!1)})}a(Ie),a(Ae),W(2),a(pe);var Me=n(pe,2),me=r(Me),he=r(me),_e=r(he),dt=r(_e,!0);a(_e);var ct=n(_e,2);{var vt=t=>{var i=Et(),o=r(i,!0);a(i),L(()=>N(o,e(u).category)),p(t,i)};O(ct,t=>{e(u)&&t(vt)})}a(he);var we=n(he,2),ut=r(we);h(ut,{name:"Plus",size:16}),a(we),a(me);var ye=n(me,2),ke=r(ye);je(ke);var Be=n(ke,2);h(Be,{name:"Search",size:12,class:"absolute left-2.5 top-2.5 text-slate-400"});var pt=n(Be,2);{var bt=t=>{var i=At(),o=r(i);h(o,{name:"X",size:12}),a(i),f("click",i,()=>d(M,"")),p(t,i)};O(pt,t=>{e(M)&&t(bt)})}a(ye);var Fe=n(ye,2);ae(Fe,21,()=>e(se)(),t=>t.id,(t,i)=>{var o=Mt(),b=r(o),l=r(b),c=r(l),S=r(c,!0);a(c);var w=n(c,2);{var E=v=>{var k=It(),q=r(k,!0);a(k),L(()=>N(q,e(i).tag)),p(v,k)};O(w,v=>{e(i).tag&&v(E)})}a(l);var y=n(l,2),C=r(y),D=r(C);h(D,{name:"Edit3",size:14}),a(C);var T=n(C,2),z=r(T);h(z,{name:"Trash2",size:14}),a(T),a(y),a(b);var H=n(b,2),A=r(H);a(H),a(o),L(v=>{N(S,e(i).title),N(A,`${v??""}...`)},[()=>e(i).content.substring(0,100)]),f("click",o,()=>{d(x,e(i),!0),d(P,!0)}),f("keydown",o,v=>v.key==="Enter"&&void(d(x,e(i),!0),d(P,!0))),f("click",C,v=>{v.stopPropagation(),d(x,e(i),!0),d(P,!0)}),f("click",T,v=>{v.stopPropagation(),ne(e(i).id)}),p(t,o)},t=>{var i=Bt(),o=r(i),b=r(o,!0);a(o),a(i),L(()=>N(b,e(M)?"No matches":"No Provisions")),p(t,i)}),a(Fe),a(Me),a(ue),a(De),a(B);var qe=n(B,2);{var gt=t=>{var i=Ft(),o=r(i),b=r(o),l=r(b),c=r(l),S=r(c,!0);a(c);var w=n(c,2),E=r(w);a(w),a(l);var y=n(l,2),C=r(y);h(C,{name:"X"}),a(y),a(b);var D=n(b,2),T=r(D),z=n(r(T),2);je(z),a(T);var H=n(T,2),A=n(r(H),2);ze(A),a(H),a(D);var v=n(D,2),k=r(v),q=n(k,2),mt=r(q,!0);a(q),a(v),a(o),a(i),L(()=>{N(S,e(x)?.id?"Edit Provision":"New Provision"),N(E,`Category: ${(e(u)?.category||"General")??""}`),N(mt,e(x)?.id?"Update":"Create")}),Ct("submit",o,oe),f("click",y,()=>d(P,!1)),Y(z,()=>e(x).title,Se=>e(x).title=Se),Y(A,()=>e(x).content,Se=>e(x).content=Se),f("click",k,()=>d(P,!1)),p(t,i)};O(qe,t=>{e(P)&&t(gt)})}var ft=n(qe,2);{var xt=t=>{var i=Xt(),o=r(i),b=r(o),l=r(b),c=n(r(l),2),S=r(c,!0);a(c),a(l);var w=n(l,2),E=r(w);h(E,{name:"X"}),a(w),a(b);var y=n(b,2),C=r(y);ae(C,20,()=>["text","date","select"],Pe,(A,v)=>{var k=qt(),q=r(k,!0);a(k),L(()=>{K(k,1,`py-3 rounded-xl border-2 text-[10px] font-black uppercase tracking-widest transition-all cursor-pointer
                                ${(j()[e(_)]?.type||"text")===v?"bg-indigo-600 border-indigo-700 text-white shadow-md":"bg-white border-slate-100 text-slate-400 hover:border-indigo-100 hover:text-indigo-400"}`),N(q,v)}),f("click",k,()=>s.onUpdateVariableConfigs({...j(),[e(_)]:{...j()[e(_)],type:v}})),p(A,k)}),a(C);var D=n(C,2);{var T=A=>{var v=Jt();ze(v),L(k=>zt(v,k),[()=>j()[e(_)]?.options?.join(`
`)||""]),f("input",v,k=>s.onUpdateVariableConfigs({...j(),[e(_)]:{...j()[e(_)],options:k.target.value.split(`
`).filter(q=>q.trim())}})),p(A,v)};O(D,A=>{j()[e(_)]?.type==="select"&&A(T)})}a(y);var z=n(y,2),H=r(z);a(z),a(o),a(i),L(()=>N(S,"{"+e(_)+"}")),f("click",w,()=>d(_,null)),f("click",H,()=>d(_,null)),p(t,i)};O(ft,t=>{e(_)&&t(xt)})}L(()=>{K(ue,1,`flex bg-slate-50 overflow-hidden shrink-0 transition-all duration-300 ${e(u)?"w-[640px]":"w-80"}`),K(Ve,1,`text-[10px] font-black uppercase px-2 py-1 rounded-md transition-all border-none cursor-pointer ${e(u)?"bg-slate-100 text-slate-400 hover:bg-slate-200 hover:text-slate-600":"bg-indigo-600 text-white"}`),N(dt,e(u)?"Category Provisions":"All Provisions")}),f("click",$,function(...t){s.onBack?.apply(this,t)}),Y(Ue,()=>e(F),t=>d(F,t)),f("click",ee,()=>d(ie,!0)),f("click",et,Z),Y(Oe,()=>e(I),t=>d(I,t)),f("click",Ve,()=>d(u,null)),f("click",we,()=>{d(x,{title:"",content:""},!0),d(P,!0)}),Y(ke,()=>e(M),t=>d(M,t)),p(re,U),Ke()}St(["click","keydown","input"]);var Rt=g('<div class="flex-1 flex items-center justify-center"><p class="text-slate-400 font-bold animate-pulse">Loading editor...</p></div>'),Kt=g('<div class="flex-1 flex items-center justify-center"><p class="text-red-500 font-bold">Structure not found.</p></div>'),Qt=g('<div class="h-screen flex flex-col bg-slate-50 overflow-hidden"><!> <main class="flex-1 overflow-hidden flex flex-col"><!></main></div>');function oa(re,s){Re(s,!0);const j=()=>Ne(kt,"$page",J),F=()=>Ne(jt,"$structures",J),I=()=>Ne(He,"$snippets",J),[J,ie]=wt();let u=V(null),P=V(!0);ht(async()=>{const m=j().params.id;if(m==="new")d(u,{title:"New Template",content:"",variables:[],provisions:[],isNew:!0},!0),d(P,!1);else{const U=F().find(B=>B.id===m);if(U)d(u,{...U},!0),d(P,!1);else try{const B=await G.collection("templates").getOne(m);d(u,B,!0)}catch(B){console.error("Failed to fetch structure",B)}finally{d(P,!1)}}});function x(){Ge("/templates")}function M(m){alert("Template saved!"),e(u).isNew&&Ge(`/templates/${m.id}`,{replaceState:!0})}var _=Qt(),X=r(_);yt(X,{});var R=n(X,2),Z=r(R);{var oe=m=>{var U=Rt();p(m,U)},ne=m=>{Gt(m,{get initialStructure(){return e(u)},get snippets(){return I()},onUpdateSnippets:U=>He.set(U),onUpdateVariableConfigs:U=>Pt.set(U),onBack:x,onSave:M})},se=m=>{var U=Kt();p(m,U)};O(Z,m=>{e(P)?m(oe):e(u)?m(ne,1):m(se,!1)})}a(R),a(_),p(re,_),Ke(),ie()}export{oa as component};
